# DIAS Medical Journal

DIAS Medical Journal is a RESTful API designed to manage doctor-patient relations for medical journals in a hospital setting. This application restricts doctors' access to the medical journals of patients unless they belong to the same department. Please note that the examples for Postman in this Readme are autogenerated by a LLM, but I have tested them with success. 

## Features

- **Doctor and Patient Management**: Add new doctors and patients to the system.
- **Access Control**: Check if a specific doctor has access to a patient's medical journal.
- **Relationship Management**: Assign doctors to patients and query relationships.



## Prerequisites

Before you begin, ensure you have the following installed:
- [.NET 8.0](https://dotnet.microsoft.com/en-us/download/dotnet/8.0)
- [Docker Desktop](https://www.docker.com/products/docker-desktop)
- [Visual Studio 2022](https://visualstudio.microsoft.com/vs/) or later (Recommended for development)

## Installation

1. **Clone the Repository**
   ```bash
   git clone https://github.com/UngVanilje/CodingChallengeDIAS
   cd DIASMedicalJournal

2. **Build the Docker Containers**
    ```bash
    - Ensure Docker Desktop is running.
    - From the project root directory, run: docker-compose up --build

3. **Database Migrations**
    ```bash
    - The application will automatically apply database migrations when started.
## Testing with Postman

You can use Postman to interact with the DIAS Medical Journal API if you prefer a graphical interface over command-line tools like `curl`.

#### Importing Requests to Postman
1. **Open Postman**: If you don't have Postman installed, you can download it from [Postman's official website](https://www.postman.com/downloads/).
   
2. **Create a New Request**:
   - Go to the `Collections` tab and create a new collection.
   - Inside the collection, create a new request for each API endpoint you want to test.

3. **Set Up Your Request**:
   - **Method**: Select the appropriate HTTP method (`GET`, `POST`, etc.).
   - **URL**: Enter the URL for your API request, such as `http://localhost:8080/Doctors`.
   - **Headers**: For `POST` requests, add a `Content-Type: application/json` header.
   - **Body**: For `POST` requests, select `raw` and `JSON`, then enter the JSON data, such as:
     ```json
     {
       "Name": "Dr. Test4",
       "Department": "Dermatology"
     }
     ```

4. **Send the Request**:
   - Click the `Send` button to execute the request.
   - Postman will display the response, including status codes and returned data.

#### Example Postman Requests
- **Create a New Doctor**: 
  - **Method**: `POST`
  - **URL**: `http://localhost:8080/Doctors`
  - **Body**:
    ```json
    {
      "Name": "Dr. Test4",
      "Department": "Dermatology"
    }
    ```

- **Check Doctor Access to a Patient's Medical Journal**: 
  - **Method**: `GET`
  - **URL**: `http://localhost:8080/accessPatient?patientID=1&doctorID=1`

- **Assign Doctor to Patient**:
  - **Method**: `POST`
  - **URL**: `http://localhost:8080/admissions/1/doctors/1`
## Considerations for improvement

### Scalabillity
- **Database Optimization**: To improve scalability, it is worth considerering optimizing the database with indexing strategies on frequently queried fields like DoctorId and PatientId to increase performance as the dataset grows larger.
- **Caching**: Implementing caching mechanisms for frequently accessed resources, such as patient data, can reduce the load on the database and improve response times.

### Idempotent

- **POST Requests**: Ensures that POST requests are idempotent where applicable. For instance, assigning a doctor to a patient should not duplicate the assignment if the operation is repeated.
- **Idempotent Endpoints**: I would consider providing idempotent endpoints for operations that can safely be repeated without having a unintended outcome.

### Other considerations 
- **Microservices**: As the project grows, I would consider refactoring the API into microservices to handle different aspects (e.g., doctor management, patient management) separately. This would help improve maintainability and scalability in the long run.
- **Authentication**: While not required for this assignment, adding authentication and authorization mechanisms would be essential for a production environment to ensure that only authorized personnel can access or modify patient data.
## Why No Controllers?
For this small project, I chose not to use controllers and instead utilized ASP.NET Core's Minimal APIs simply because this was such a small project. Usually Controllers would be a must most of the time.